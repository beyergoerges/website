doctype html
html(lang="de" dir="ltr")
  head
    // Global site tag (gtag.js) - Google Analytics
    script(async="" src="https://www.googletagmanager.com/gtag/js?id=UA-126828707-1")
    script.
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-126828707-1');
    meta(charset="utf-8")
    title Beyer Görges – Digital-Agentur
    meta(name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0")
    link(rel="icon" href="../favicon.ico?v=1.1")
    link(rel="stylesheet" href="../vendor.min.css")
    link(rel="stylesheet" href="../main.min.css")
  body(class="jd-theme--xmas")
    main#barba-wrapper
      .barba-container
        svg(xmlns="http://www.w3.org/2000/svg" style="display: none;")
          include ../includes/svg/logo.pug
          include ../includes/svg/icons.pug
        .jd-xmas-cookies
          .jd-xmas-cookies__card
            .jd-xmas-cookies__card-flip
              .jd-xmas
                .jd-xmas__text.jd-xmas__text--top
                .jd-xmas__icons
                  svg.jd-xmas__icon.jd-xmas__icon--1(viewbox="0 0 200 307.21")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--1(fill="currentColor" points="100 134 200 307.2 0 307.2 100 134")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--2(fill="currentColor" points="100 67 200 240.21 0 240.21 100 67")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--3(fill="currentColor" points="100 0 200 173.21 0 173.21 100 0")
                  svg.jd-xmas__icon.jd-xmas__icon--2(viewbox="0 0 200 307.21")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--1(fill="currentColor" points="100 134 200 307.2 0 307.2 100 134")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--2(fill="currentColor" points="100 67 200 240.21 0 240.21 100 67")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--3(fill="currentColor" points="100 0 200 173.21 0 173.21 100 0")
                  svg.jd-xmas__icon.jd-xmas__icon--3(viewbox="0 0 200 307.21")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--1(fill="currentColor" points="100 134 200 307.2 0 307.2 100 134")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--2(fill="currentColor" points="100 67 200 240.21 0 240.21 100 67")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--3(fill="currentColor" points="100 0 200 173.21 0 173.21 100 0")
                  svg.jd-xmas__icon.jd-xmas__icon--4(viewbox="0 0 200 307.21")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--1(fill="currentColor" points="100 134 200 307.2 0 307.2 100 134")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--2(fill="currentColor" points="100 67 200 240.21 0 240.21 100 67")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--3(fill="currentColor" points="100 0 200 173.21 0 173.21 100 0")
                  svg.jd-xmas__icon.jd-xmas__icon--5(viewbox="0 0 200 307.21")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--1(fill="currentColor" points="100 134 200 307.2 0 307.2 100 134")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--2(fill="currentColor" points="100 67 200 240.21 0 240.21 100 67")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--3(fill="currentColor" points="100 0 200 173.21 0 173.21 100 0")
                  svg.jd-xmas__icon.jd-xmas__icon--6(viewbox="0 0 200 307.21")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--1(fill="currentColor" points="100 134 200 307.2 0 307.2 100 134")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--2(fill="currentColor" points="100 67 200 240.21 0 240.21 100 67")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--3(fill="currentColor" points="100 0 200 173.21 0 173.21 100 0")
                  svg.jd-xmas__icon.jd-xmas__icon--7(viewbox="0 0 200 307.21")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--1(fill="currentColor" points="100 134 200 307.2 0 307.2 100 134")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--2(fill="currentColor" points="100 67 200 240.21 0 240.21 100 67")
                    polygon.jd-xmas__logo-triangle.jd-xmas__logo-triangle--3(fill="currentColor" points="100 0 200 173.21 0 173.21 100 0")
                .jd-xmas__text.jd-xmas__text--bottom
              .jd-cookies
                .jd-cookies__open
                  .jd-cookies__text
                    span.jd-cookies__text-salutation Dein
                    span &nbsp;persönlicher 
                    span.jd-cookies__text-nowrap Glücks-Cookie
                    span &nbsp;für 2019
                  .jd-cookie.jd-cookie--1
                    img(src="../images/xmas/cookie1.png")
                  .jd-cookies__button Jetzt öffnen!
                .jd-cookies__cracked
                  .jd-cookie.jd-cookie--2
                    img(src="../images/xmas/cookie2.png")
                  .jd-cookies__message
                    span.jd-cookies__message-inner
                      span.jd-cookies__message-name
                      span.jd-cookies__message-text
                  .jd-cookies__reload 
                    span Gefällt mir nicht.&nbsp;
                    svg.jd-cookies__reload-icon(xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16")
                      path(fill="currentColor" d="M7.5,14C4.5,14,2,11.5,2,8.5S4.5,3,7.5,3c1.2,0,2.2,0.4,3.2,1H8v2h6V0h-2v2.5C10.7,1.5,9.2,1,7.5,1 C3.4,1,0,4.4,0,8.5S3.4,16,7.5,16S15,12.6,15,8.5h-2C13,11.5,10.5,14,7.5,14z")
                    span.jd-cookies__reload-button Nochmal!
                .jd-cookies__info-layer
                  .jd-cookies__info-layer-heading Gewusst?
                  .jd-cookies__info-layer-text Der Legende nach dienten Glückskekse bereits im 13. Jahrhundert dazu, geheime Botschaften zu transportieren – sozusagen die damalige SMS – und sogar schon mit einer geschmackvollen Verschlüsselung… ;-)
                  .jd-cookies__info-layer-text Wir wünschen viel Spaß damit!
                header.jd-cookies__header
                  a.jd-logo.jd-cookies__logo(href="/")
                    svg(width="144" height="23")
                      use(href="#jd-logo" xlink:href="#jd-logo")
                  .jd-cookies__info
                    svg(xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24")
                      path.jd-cookies__info-icon(fill="currentColor" d="M12,0C5.383,0,0,5.383,0,12s5.383,12,12,12s12-5.383,12-12S18.617,0,12,0z M14.658,18.284 c-0.661,0.26-2.952,1.354-4.272,0.191c-0.394-0.346-0.59-0.785-0.59-1.318c0-0.998,0.328-1.868,0.919-3.957 c0.104-0.395,0.231-0.907,0.231-1.313c0-0.701-0.266-0.887-0.987-0.887c-0.352,0-0.742,0.125-1.095,0.257l0.195-0.799 c0.787-0.32,1.775-0.71,2.621-0.71c1.269,0,2.203,0.633,2.203,1.837c0,0.347-0.06,0.955-0.186,1.375l-0.73,2.582 c-0.151,0.522-0.424,1.673-0.001,2.014c0.416,0.337,1.401,0.158,1.887-0.071L14.658,18.284z M13.452,8c-0.828,0-1.5-0.672-1.5-1.5 s0.672-1.5,1.5-1.5s1.5,0.672,1.5,1.5S14.28,8,13.452,8z")
                      path.jd-cookies__info-close(fill="currentColor" d="M12,0A12,12,0,1,0,24,12,12.035,12.035,0,0,0,12,0Zm4.95,15.536L15.536,16.95,12,13.414,8.464,16.95,7.05,15.536,10.586,12,7.05,8.464,8.464,7.05,12,10.586,15.536,7.05,16.95,8.464,13.414,12Z")
          .jd-xmas-cookies__overlay
            .jd-xmas-cookies__modal
              .jd-xmas-cookies__modal-text Diese Seite verwendet Glücks-Cookies.
              .jd-xmas-cookies__modal-button Akzeptieren
          canvas(class="jd-snow")
          .jd-xmas-cookies__snow-cap
            svg.jd-xmas-cookies__snow-cap-shape(xmlns="http://www.w3.org/2000/svg" viewbox="0 0 435.62 10.21")
              path(fill="currentColor" d="M0,10.21H435.62C429.4,8,420.66,7.73,417,7.36,406,6.25,398.35,11.08,387,6.1,374.8.71,363.84,4.65,351.38,1.43c-10.87-2.81-14-1.43-24,3.79-7.67,4-13.91-.63-22.28.17-8.63.83-13.9,1.66-22.12-2a29.87,29.87,0,0,0-22.81-.79c-4.09,1.57-4,2-8.62,2.11-2.83.09-5.93-.39-8.72,0-7.25,1.11-12.22,4.1-20.43,3.3C214.94,7.3,207,6.71,198.74,6.71H172.91c-8,0-14.36-2.25-21.91-3.32-15.58-2.21-27.27,4.73-42.16,2C101.73,4,94.63,2.75,87.2,2.75c-7.7,0-13.19,2.52-20.5,3.3a211.54,211.54,0,0,1-38,0c-8.89-.77-16.31-2.5-25.59-3.3C2,2.65,1,2.58,0,2.52Z")
            .jd-xmas-cookies__snow-cap-text Frohe Weihnachten und einen guten Rutsch!
        style.
          .jd-snow {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            pointer-events: none;
          }
        script(src="../vendor.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TimelineLite.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.4/plugins/ScrollToPlugin.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/animation.gsap.js")
        script(src="../main.js")
        script.
          var canvas = document.querySelector('.jd-snow'),
          ctx = canvas.getContext('2d'),
          windowW = window.innerWidth,
          windowH = window.innerHeight,
          numFlakes = 200,
          flakes = [];

          function Flake(x, y) {
          var maxWeight = 5,
              maxSpeed = 3;

          this.x = x;
          this.y = y;
          this.r = randomBetween(0, 1);
          this.a = randomBetween(0, Math.PI);
          this.aStep = 0.01;


          this.weight = randomBetween(2, maxWeight);
          this.alpha = (this.weight / maxWeight);
          this.speed = (this.weight / maxWeight) * maxSpeed;

          this.update = function() {
            this.x += Math.cos(this.a) * this.r;
            this.a += this.aStep;
            
            this.y += this.speed;
          }

          }

          function init() {
          var i = numFlakes,
              flake,
              x,
              y;

          while (i--) {
            x = randomBetween(0, windowW, true);
            y = randomBetween(0, windowH, true);
            
            
            flake = new Flake(x, y);
            flakes.push(flake);
          }

          scaleCanvas();
          loop();  
          }

          function scaleCanvas() {
          canvas.width = windowW;
          canvas.height = windowH;
          }

          function loop() {
          var i = flakes.length,
              z,
              dist,
              flakeA,
              flakeB;

          // clear canvas
          ctx.save();
          ctx.setTransform(1, 0, 0, 1, 0, 0);
          ctx.clearRect(0, 0, windowW, windowH);
          ctx.restore();

          // loop of hell
          while (i--) {
            
            flakeA = flakes[i];
            flakeA.update();
            

            /*for (z = 0; z < flakes.length; z++) {
              flakeB = flakes[z];
              if (flakeA !== flakeB && distanceBetween(flakeA, flakeB) < 150) {          
                ctx.beginPath();
                ctx.moveTo(flakeA.x, flakeA.y);
                ctx.lineTo(flakeB.x, flakeB.y);
                ctx.strokeStyle = '#444444';
                ctx.stroke();
                ctx.closePath();
              }
            }*/

            
            ctx.beginPath();
            ctx.arc(flakeA.x, flakeA.y, flakeA.weight, 0, 2 * Math.PI, false);
            ctx.fillStyle = 'rgba(255, 255, 255, ' + flakeA.alpha + ')';
            ctx.fill();
            
            if (flakeA.y >= windowH) {
              flakeA.y = -flakeA.weight;
            }  
          }

          requestAnimationFrame(loop);
          }

          function randomBetween(min, max, round) {
          var num = Math.random() * (max - min + 1) + min;

          if (round) {
            return Math.floor(num);
          } else {
            return num;
          }
          }

          function distanceBetween(vector1, vector2) {
          var dx = vector2.x - vector1.x,
              dy = vector2.y - vector1.y;

          return Math.sqrt(dx*dx + dy*dy);
          }

          init();
